
# ---------- CORE SETTINGS ----------
set -g default-terminal "tmux-256color"
set -sa terminal-overrides ",*:RGB"
set -g focus-events on

unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Start window numbering at 1
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Increase history limit
set -g history-limit 100

set -g mouse on

# ---------- KEY BINDINGS ----------
# Reload config with prefix + r
bind r source-file ~/.tmux.conf \; display "[ SYSTEM RELOADED ]"

# Split panes with | and -
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Vim-like pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resizing panes with Prefix + Alt-arrows
bind -r M-h resize-pane -L 5
bind -r M-j resize-pane -D 5
bind -r M-k resize-pane -U 5
bind -r M-l resize-pane -R 5

# ---------- PLUGINS ----------
# Install tpm if not installed
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-cpu'          
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' 
set -g @plugin 'tmux-plugins/tmux-online-status' 
set -g @plugin 'christoomey/vim-tmux-navigator'  
set -g @plugin 'tmux-plugins/tmux-resurrect'     
set -g @plugin 'tmux-plugins/tmux-continuum'     
set -g @plugin 'ofirgall/tmux-window-name'       
set -g @plugin 'tmux-plugins/tmux-yank'        
set -g @plugin 'samoshkin/tmux-plugin-sysstat'   
set -g @plugin 'wfxr/tmux-net-speed'             
set -g @plugin 'robhurring/tmux-uptime'

# ---------- VISUAL STYLING ----------
# Cyberpunk color scheme
NEON_PINK="#ff0055"
NEON_BLUE="#00ccff"
NEON_GREEN="#00ff9f"
NEON_PURPLE="#9966ff"
NEON_YELLOW="#ffcc00"
NEON_ORANGE="#ff9900"
NEON_RED="#ff2222"
DEEP_BLUE="#061830"     # Deep dark blue background
DARKER_BLUE="#041020"   # Even darker blue
TEXT_COLOR="#070a10"   # Softer text color instead of white
DIM_TEXT="#1bd274"      # Dimmed text

# Set the status bar colors - Deep blue background
set -g status-style "bg=$DEEP_BLUE,fg=$TEXT_COLOR"

# Set window title colors
setw -g window-status-style "fg=$DIM_TEXT,bg=$DEEP_BLUE"
setw -g window-status-current-style "fg=$DEEP_BLUE,bg=$NEON_GREEN,bold"

# Set pane borders
set -g pane-border-style "fg=$DIM_TEXT"
set -g pane-active-border-style "fg=$NEON_GREEN"

# Set message styling
set -g message-style "bg=$NEON_PURPLE,fg=$TEXT_COLOR,bold"

# ---------- STATUS BAR LAYOUT ----------
# Status bar general settings
set -g status on
set -g status-interval 1
set -g status-position bottom
set -g status-justify centre  # Center the window list

# Prefix indicator
set -g @prefix_highlight_fg "$TEXT_COLOR"
set -g @prefix_highlight_bg "$NEON_PURPLE"
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_copy_mode_attr "fg=$TEXT_COLOR,bg=$NEON_YELLOW,bold"
set -g @prefix_highlight_prefix_prompt '󰘳 '
set -g @prefix_highlight_copy_prompt ' 󰆏 '
set -g @prefix_highlight_output_prefix ''
set -g @prefix_highlight_output_suffix ''

# Online status settings
set -g @online_icon "#[fg=$NEON_GREEN]󰖩"
set -g @offline_icon "#[fg=$NEON_RED]󰖪"

# System stats settings
set -g @sysstat_cpu_view_tmpl '#[fg=#{cpu.color}]󰘚 #{cpu.pused}'
set -g @sysstat_mem_view_tmpl '#[fg=#{mem.color}]󰍛 #{mem.pused}'
set -g @sysstat_swap_view_tmpl '#[fg=#{swap.color}]󰓡 #{swap.pused}'
set -g @sysstat_loadavg_view_tmpl '#[fg=#{loadavg.color}]󰊚 #{loadavg.1}'

# CPU colors based on load
set -g @sysstat_cpu_color_low "$NEON_GREEN"
set -g @sysstat_cpu_color_medium "$NEON_YELLOW"
set -g @sysstat_cpu_color_stress "$NEON_RED"

# Memory colors based on usage
set -g @sysstat_mem_color_low "$NEON_GREEN"
set -g @sysstat_mem_color_medium "$NEON_YELLOW"
set -g @sysstat_mem_color_stress "$NEON_RED"

# Set network icons
set -g @net_speed_format "󰧊 %8s 󰦻 %8s"

# Left side status
set -g status-left-length 150
set -g status-left "\
#[fg=$NEON_PINK,bg=$DEEP_BLUE] #{prefix_highlight} \
#[fg=$NEON_PINK,bg=$DARKER_BLUE] 󰣇 #S #[fg=$DEEP_BLUE]│\
#[fg=$NEON_BLUE] 󰪥 #P \
#[fg=$NEON_GREEN] 󰉋 #{=/30/…:pane_current_path} #[fg=$DEEP_BLUE]│\
#[fg=$NEON_YELLOW] 󰘬 #(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD 2>/dev/null || echo 'none') \
#[fg=$NEON_ORANGE]#(cd #{pane_current_path}; git status -s | wc -l | sed 's/^/ /')"

# Right side status
set -g status-right-length 150
set -g status-right "\
#{online_status} #[fg=$DEEP_BLUE]│\
#[fg=$NEON_YELLOW] 󰔟 #{uptime} #[fg=$DEEP_BLUE]│\
#{net_speed} #[fg=$DEEP_BLUE]│\
#{sysstat_cpu} #[fg=$DEEP_BLUE]│\
#{sysstat_mem} #[fg=$DEEP_BLUE]│\
#[fg=$NEON_ORANGE] 󰋊 #(sensors | grep 'CPU:' | sed 's/.*+\\([0-9.]*\\).*/\\1°C/') #[fg=$DEEP_BLUE]│\
#[fg=$NEON_PURPLE] 󰢮 #(nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader)°C #[fg=$DEEP_BLUE]│\
#[fg=$NEON_BLUE] 󰌽 #(lsb_release -d | cut -f2) #[fg=$DEEP_BLUE]│\
#[fg=$NEON_GREEN] 󰅐 #(uptime -p | sed 's/up //')"

# Format for windows list (center)
setw -g window-status-format "#[fg=$DIM_TEXT,bg=$DEEP_BLUE] 󰐱 #I #W "
setw -g window-status-current-format "#[fg=$TEXT_COLOR,bg=$NEON_GREEN,bold] 󰐱 #I #W "
setw -g window-status-separator "#[fg=$DIM_TEXT]󱂬"

setw -g monitor-activity on
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
set -g bell-action none

#NEOVIM COMPATIBILITY 
set -g escape-time 10
set -g focus-events on

#CONTINUUM SETTINGS 
set -g @continuum-restore 'on'       
set -g @continuum-save-interval '15' 

run '~/.tmux/plugins/tpm/tpm'
